<!-- RECIPE FORM TEMPLATE (Add / Edit) -->
<div class="container">

  <!-- PAGE TITLE -->
  <div class="page-header">
    <h2>{{ isEdit ? 'âœï¸ Edit Recipe' : 'â• Add Recipe' }}</h2>
    <a routerLink="/recipes" class="back-link">â† Back to Recipes</a>
  </div>

  <!-- RECIPE FORM CARD -->
  <div class="form-card">
    <form (ngSubmit)="submit()">

      <label>Title</label>
      <input type="text" [(ngModel)]="recipe.title" name="title" placeholder="e.g. Creamy Garlic Pasta" required />

      <label>Ingredients</label>
      <textarea [(ngModel)]="recipe.ingredients" name="ingredients" rows="5" placeholder="List each ingredient on a new lineâ€¦"></textarea>

      <label>Instructions</label>
      <textarea [(ngModel)]="recipe.instructions" name="instructions" rows="5" placeholder="Describe every step clearlyâ€¦"></textarea>

      <button type="submit" class="save">
        {{ isEdit ? 'ğŸ’¾ Update Recipe' : 'ğŸ’¾ Save Recipe' }}
      </button>
    </form>
  </div>

  <!-- DIVIDER WITH TEXT -->
  <div class="divider">
    <span>or get ideas below</span>
  </div>

  <!-- MEALDB SEARCH CARD -->
  <div class="mealdb-card">
    <h3>ğŸ” Get Ideas from MealDB</h3>
    <p class="hint">Search for recipes by ingredient (e.g., chicken, beef, pasta)</p>

    <div class="meal-search">
      <input
        type="text"
        [(ngModel)]="ingredient"
        name="ingredient"
        placeholder="e.g. chicken"
      />
      <button type="button" (click)="searchMealDB()" [disabled]="isSearching" class="search-btn">
        {{ isSearching ? 'ğŸ”„ Searching...' : 'ğŸ” Search' }}
      </button>
    </div>

    <!-- loading state -->
    <div *ngIf="isSearching" class="loading">
      <span class="loading-dots"></span> Searching recipes...
    </div>

    <!-- results list -->
    <ul class="meal-list" *ngIf="mealResults.length > 0">

      <!-- result count badge -->
      <div class="results-count">
        Found <strong>{{ mealResults.length }}</strong> recipe{{ mealResults.length > 1 ? 's' : '' }}
      </div>

      <li *ngFor="let meal of mealResults" class="meal-item">
        <img [src]="meal.image" alt="{{ meal.name }}" />

        <div class="meal-info">
          <strong class="meal-name">{{ meal.name }}</strong>

          <!-- ingredient chips instead of a nested list -->
          <div class="ingredient-chips">
            <span class="chip" *ngFor="let ing of meal.ingredients">{{ ing }}</span>
          </div>

          <button type="button" class="use-btn" (click)="useMeal(meal)">
            âœ… Use This Recipe
          </button>
        </div>
      </li>
    </ul>
  </div>

</div>